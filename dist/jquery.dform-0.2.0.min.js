(function(a){var k={},c={},d=a.each,e=a.isArray,g=function(b,f,h){if(typeof f==="string"){e(b[f])||(b[f]=[]);b[f].push(h)}else d(f,function(l,m){g(b,l,m)})},i=function(b){return a.map(b,function(f,h){return h})},j=function(b,f,h){a.dform.hasSubscription(b)&&this.each(function(){var l=a(this);d(k[b],function(m,o){o.call(l,f,h)})});return this},n=function(b){var f=b.type,h=this;this.dform("run","[pre]",b,f);d(b,function(l,m){h.dform("run",l,m,f)});this.dform("run","[post]",b,f);return this};a.extend(a,
{keyset:i,withKeys:function(b,f){var h={};d(f,function(l,m){if(b[m])h[m]=b[m]});return h},withoutKeys:function(b,f){var h={};d(b,function(l,m){~a.inArray(l,f)||(h[l]=m)});return h},dform:{options:{prefix:"ui-dform-"},defaultType:function(b){return a("<"+b.type+">").dform("attr",b)},removeType:function(b){delete c[b]},typeNames:function(){return i(c)},addType:function(b,f){g(c,b,f)},addTypeIf:function(b,f,h){b&&a.dform.addType(f,h)},subscriberNames:function(){return a.keyset(k)},subscribe:function(b,
f){g(k,b,f)},subscribeIf:function(b,f,h){b&&a.dform.subscribe(f,h)},removeSubscription:function(b){delete k[b]},hasSubscription:function(b){return k[b]?true:false},createElement:function(b){if(!b.type)throw"No element type given! Must always exist.";var f=b.type,h=null,l=a.withoutKeys(b,["type"]);if(c[f])d(c[f],function(m,o){h=o.call(h,l)});else h=a.dform.defaultType(b);return a(h)},methods:{run:function(b,f,h){if(typeof b!=="string")return n.call(this,b);return j.call(this,b,f,h)},append:function(b,
f){if(f&&a.dform.converters&&a.isFunction(a.dform.converters[f]))b=a.dform.converters[f](b);f=a.dform.createElement(b);this.append(f);f.dform("run",b)},attr:function(b,f){var h=a.keyset(k);e(f)&&a.merge(h,f);this.attr(a.withoutKeys(b,h))},ajax:function(b,f,h){a.extend({success:f,error:h},b)},init:function(b){b=b.type?b:a.extend({type:"form"},b);if(this.is(b.type)){this.dform("attr",b);this.dform("run",b)}else this.dform("append",b)}}}});a.fn.extend({dform:function(b){var f=a(this);a.dform.methods[b]?
a.dform.methods[b].apply(f,Array.prototype.slice.call(arguments,1)):a.dform.methods.init.apply(f,arguments);return this}})})(jQuery);
(function(a){var k=a.each,c=function(e,g){return function(i){return a(e).dform("attr",i,g)}},d=function(e){var g=this;if(a.isPlainObject(e))g.dform("append",e);else a.isArray(e)?k(e,function(i,j){g.dform("append",j)}):g.html(e)};a.dform.addType({container:c("<div>"),text:c('<input type="text" />'),password:c('<input type="password" />'),submit:c('<input type="submit" />'),reset:c('<input type="reset" />'),hidden:c('<input type="hidden" />'),radio:c('<input type="radio" />'),checkbox:c('<input type="checkbox" />'),
file:c('<input type="file" />'),number:c('<input type="number" />'),url:c('<input type="url" />'),tel:c('<input type="tel" />'),email:c('<input type="email" />'),checkboxes:c("<div>",["name"]),radiobuttons:c("<div>",["name"])});a.dform.subscribe({"class":function(e){this.addClass(e)},html:d,elements:d,value:function(e){this.val(e)},css:function(e){this.css(e)},options:function(e,g){var i=this;if(g==="select"||g==="optgroup")k(e,function(j,n){var b={type:"option",value:j};if(typeof n==="string"){b.value=
j;b.html=n}if(typeof n==="object")b=a.extend(b,n);i.dform("append",b)});else if(g==="checkboxes"||g==="radiobuttons")k(e,function(j,n){var b=g==="radiobuttons"?{type:"radio"}:{type:"checkbox"};if(typeof n==="string")b.caption=n;else a.extend(b,n);b.value=j;i.dform("append",b)})},caption:function(e,g){var i={};if(typeof e==="string")i.html=e;else a.extend(i,e);if(g=="fieldset"){i.type="legend";this.prepend(a.dform.createElement(i));a(legend).dform("run",i)}else{i.type="label";if(this.attr("id"))i["for"]=
this.attr("id");e=a(a.dform.createElement(i));g==="checkbox"||g==="radio"?this.parent().append(a(e)):e.insertBefore(this);e.dform("run",i)}},type:function(e,g){a.dform.options.prefix&&this.addClass(a.dform.options.prefix+g)},url:function(){},"[post]":function(e,g){if(g==="checkboxes"||g==="radiobuttons")this.children("[type="+(g==="checkboxes"?"checkbox":"radio")+"]").each(function(){a(this).attr("name",e.name)})}})})(jQuery);
(function(a){function k(c){if(a.isFunction(c.split)){c=c.split(".");if(c.length>1){var d=c.shift();if(d=jQuery.global.localize(d))return a.getValueAt(d,c)}}return false}a.dform.addTypeIf(a.isFunction(a.fn.progressbar),"progressbar",function(c){return a("<div>").dform("attr",c).progressbar(_getOptions("progressbar",c))});a.dform.addTypeIf(a.isFunction(a.fn.slider),"slider",function(c){return a("<div>").dform("attr",c).slider(_getOptions("slider",c))});a.dform.addTypeIf(a.isFunction(a.fn.accordion),
"accordion",function(c){return a("<div>").dform("attr",c)});a.dform.addTypeIf(a.isFunction(a.fn.tabs),"tabs",function(c){return a("<div>").dform("attr",c)});a.dform.subscribeIf(a.isFunction(a.fn.accordion),"entries",function(c,d){if(d=="accordion"){var e=this;a.each(c,function(g,i){g=a.extend({type:"div"},i);a(e).formElement(g);if(i.caption){i=a(e).children("div:last").prev();i.replaceWith('<h3><a href="#">'+i.html()+"</a></h3>")}})}});a.dform.subscribeIf(a.isFunction(a.fn.tabs),"entries",function(c,
d){if(d=="tabs"){var e=this;this.append("<ul>");var g=a(e).children("ul:first");a.each(c,function(i,j){i=j.id?j.id:i;a.extend(j,{type:"container",id:i});a(e).dform("append",j);j=a(e).children("div:last").prev();a(j).wrapInner(a("<a>").attr("href","#"+i));a(g).append(a("<li>").wrapInner(j))})}});a.dform.subscribeIf(a.isFunction(a.fn.dialog),"dialog",function(c,d){if(d=="form"||d=="fieldset")this.dialog(c)});a.dform.subscribeIf(a.isFunction(a.fn.resizable),"resizable",function(c){this.resizable(c)});
a.dform.subscribeIf(a.isFunction(a.fn.datepicker),"datepicker",function(c,d){d=="text"&&this.datepicker(c)});a.dform.subscribeIf(a.isFunction(a.fn.autocomplete),"autocomplete",function(c,d){d=="text"&&this.autocomplete(c)});a.dform.subscribe("[post]",function(c,d){if(this.parents("form").hasClass("ui-widget")){if((d=="button"||d=="submit")&&a.isFunction(a.fn.button))this.button();a.inArray(d,["text","textarea","password","fieldset"])!=-1&&this.addClass("ui-widget-content ui-corner-all")}if(d=="accordion"||
d=="tabs")this[d](_getOptions(d,c))});a.dform.subscribeIf(a.isFunction(a.fn.validate),{"[pre]":function(c,d){if(d=="form"){d={};if(this.hasClass("ui-widget"))d={highlight:function(e){a(e).addClass("ui-state-highlight")},unhighlight:function(e){a(e).removeClass("ui-state-highlight")}};typeof c.validate=="object"&&a.extend(d,c.validate);this.validate(d)}},validate:function(c,d){d!="form"&&this.rules("add",c)}});a.dform.subscribeIf(a.isFunction(a.fn.ajaxForm),"ajax",function(c,d){d==="form"&&this.ajaxForm(c)});
a.dform.subscribeIf(a.global&&a.isFunction(a.global.localize),"html",function(c){(c=k(c))&&a(this).html(c)});a.getValueAt=function(c,d){d=isArray(d)?d:d.split(".");c=c;for(var e=0;e<d.length;e++){var g=d[e];if(!c[g])return false;c=c[g]}return c};a.dform.subscribeIf(a.global,"options",function(c,d){if(d=="select"&&typeof c=="string"){a(this).html("");(c=k(c))&&a(this).dform("run","options",c,d)}});a.dform.subscribeIf(a.isFunction(a.fn.wysiwyg),"wysiwyg",function(){})})(jQuery);
